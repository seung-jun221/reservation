<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ìˆ˜í•™ì˜ ì•„ì¹¨ X i.study - ê°œë³„ ì»¨ì„¤íŒ… ì˜ˆì•½</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          sans-serif;
        background-color: #f5f5f5;
        color: #333;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }

      .card {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      h1 {
        font-size: 24px;
        text-align: center;
        margin-bottom: 10px;
        color: #1a73e8;
      }

      h2 {
        font-size: 20px;
        text-align: center;
        margin-bottom: 30px;
        color: #666;
      }

      h3 {
        font-size: 18px;
        margin-bottom: 15px;
        color: #333;
      }

      .info-box {
        background: #e3f2fd;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        font-size: 14px;
        line-height: 1.6;
      }

      .info-box strong {
        display: block;
        margin-bottom: 10px;
        font-size: 16px;
      }

      .info-box ul {
        margin-left: 20px;
        margin-top: 10px;
      }

      .info-box li {
        margin-bottom: 5px;
      }

      .warning-box {
        background: #fff3cd;
        border: 1px solid #ffc107;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        font-size: 14px;
        line-height: 1.6;
      }

      .error-box {
        background: #ffebee;
        border: 1px solid #f44336;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        font-size: 14px;
        color: #c62828;
      }

      .btn {
        padding: 15px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        text-align: center;
        width: 100%;
      }

      .btn-primary {
        background: #1a73e8;
        color: white;
      }

      .btn-primary:hover {
        background: #1557b0;
      }

      .btn-primary:disabled {
        background: #ccc;
        cursor: not-allowed;
      }

      .btn-secondary {
        background: white;
        color: #1a73e8;
        border: 2px solid #1a73e8;
        margin-bottom: 10px;
      }

      .btn-secondary:hover {
        background: #e3f2fd;
      }

      .btn-danger {
        background: #f44336;
        color: white;
      }

      .btn-danger:hover {
        background: #d32f2f;
      }

      .btn-link {
        background: #4caf50;
        color: white;
      }

      .btn-link:hover {
        background: #388e3c;
      }

      /* ë‚ ì§œ ì„ íƒ */
      .date-selector {
        margin-bottom: 30px;
      }

      .week-container {
        margin-bottom: 20px;
      }

      .date-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin-bottom: 20px;
      }

      .date-card {
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.3s;
        text-align: center;
      }

      .date-card:hover {
        border-color: #1a73e8;
        background: #f0f7ff;
      }

      .date-card.selected {
        border-color: #1a73e8;
        background: #e3f2fd;
      }

      .date-card.full {
        background: #f5f5f5;
        cursor: not-allowed;
        opacity: 0.6;
      }

      .date-card.past {
        background: #ffebee;
        cursor: not-allowed;
        opacity: 0.5;
      }

      .date-header {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
      }

      .date-month {
        font-size: 14px;
        color: #666;
      }

      .date-day {
        font-size: 24px;
        font-weight: bold;
        color: #333;
      }

      .date-weekday {
        font-size: 14px;
        color: #666;
      }

      .date-info {
        margin-top: 10px;
      }

      .remaining-seats {
        font-size: 12px;
        padding: 3px 8px;
        border-radius: 12px;
        display: inline-block;
        background: #d4edda;
        color: #155724;
      }

      .remaining-seats.full {
        background: #f8d7da;
        color: #721c24;
      }

      .remaining-seats.few {
        background: #fff3cd;
        color: #856404;
      }

      /* ì‹œê°„ ì„ íƒ */
      .time-selector {
        margin-bottom: 30px;
      }

      .time-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
      }

      .time-slot {
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.3s;
        text-align: center;
      }

      .time-slot:hover {
        border-color: #1a73e8;
        background: #f0f7ff;
      }

      .time-slot.selected {
        border-color: #1a73e8;
        background: #1a73e8;
        color: white;
      }

      .time-slot.unavailable {
        background: #f5f5f5;
        cursor: not-allowed;
        opacity: 0.5;
      }

      .time-text {
        font-size: 16px;
        font-weight: 600;
      }

      .time-status {
        font-size: 12px;
        margin-top: 5px;
      }

      /* ì •ë³´ ì…ë ¥ */
      .form-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #555;
      }

      input,
      select {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: #1a73e8;
      }

      input:disabled {
        background: #f5f5f5;
      }

      /* ì˜ˆì•½ ì •ë³´ */
      .reservation-info {
        background: #f5f5f5;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .info-item {
        display: flex;
        margin: 10px 0;
      }

      .info-label {
        font-weight: 600;
        color: #666;
        min-width: 100px;
        margin-right: 15px;
      }

      .info-value {
        color: #333;
      }

      /* ë¡œë”© */
      .loading {
        text-align: center;
        padding: 40px;
        color: #666;
      }

      .spinner {
        border: 3px solid #f3f3f3;
        border-top: 3px solid #1a73e8;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .hidden {
        display: none !important;
      }

      /* ì™„ë£Œ í™”ë©´ */
      .success-icon {
        font-size: 48px;
        text-align: center;
        margin-bottom: 20px;
      }

      /* í† ìŠ¤íŠ¸ ë©”ì‹œì§€ */
      .toast {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        background: #333;
        color: white;
        padding: 15px 30px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .toast.show {
        opacity: 1;
      }

      .toast.error {
        background: #f44336;
      }

      .toast.success {
        background: #4caf50;
      }

      .toast.warning {
        background: #ff9800;
      }

      @media (max-width: 768px) {
        .container {
          padding: 10px;
        }

        .card {
          padding: 20px;
        }

        .date-grid,
        .time-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- ë©”ì¸ í™”ë©´: í—¤ë” + ë³¸ì¸ í™•ì¸ -->
      <div id="mainScreen" class="card">
        <h1>ìˆ˜í•™ì˜ ì•„ì¹¨ X i.study [ìˆ˜ë¦¬íƒêµ¬]</h1>
        <h2>ê°œë³„ ì»¨ì„¤íŒ… ì˜ˆì•½</h2>

        <div class="info-box">
          <strong>ì§„ë‹¨ê²€ì‚¬ ì™„ë£Œ í›„ ê°œë³„ ì»¨ì„¤íŒ… ì˜ˆì•½</strong>
          <ul>
            <li>ì§„ë‹¨ê²€ì‚¬ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ 1:1 ë§ì¶¤ ì»¨ì„¤íŒ…</li>
            <li>ì†Œìš”ì‹œê°„: 30ë¶„</li>
            <li>í•™ìŠµ ë¡œë“œë§µ ë° ì»¤ë¦¬í˜ëŸ¼ ì„¤ê³„</li>
          </ul>
        </div>

        <div
          style="
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
          "
        >
          <h3 style="margin-bottom: 20px">ë³¸ì¸ í™•ì¸</h3>
          <p style="margin-bottom: 20px; color: #666; font-size: 14px">
            ì§„ë‹¨ê²€ì‚¬ë¥¼ ì™„ë£Œí•˜ì‹  í•™ë¶€ëª¨ë‹˜ì˜ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
          </p>

          <div class="form-group">
            <label>í•™ë¶€ëª¨ ì—°ë½ì²˜</label>
            <input
              type="tel"
              id="phoneInput"
              placeholder="010-0000-0000"
              maxlength="13"
              required
            />
          </div>

          <button class="btn btn-primary" onclick="verifyUser()">í™•ì¸</button>

          <div
            style="
              margin-top: 20px;
              padding-top: 20px;
              border-top: 1px solid #e0e0e0;
            "
          >
            <button
              class="btn btn-secondary"
              onclick="checkExistingReservation()"
            >
              ì˜ˆì•½ í™•ì¸/ì·¨ì†Œ
            </button>
          </div>
        </div>
      </div>

      <!-- ì§„ë‹¨ê²€ì‚¬ ë¯¸ì‹ ì²­ì ì•ˆë‚´ -->
      <div id="testGuideRedirect" class="card hidden">
        <h1>ìˆ˜í•™ì˜ ì•„ì¹¨ X i.study [ìˆ˜ë¦¬íƒêµ¬]</h1>
        <h2>ì§„ë‹¨ê²€ì‚¬ ì‹ ì²­ í•„ìš”</h2>

        <div class="error-box">
          <p><strong>âš ï¸ ì§„ë‹¨ê²€ì‚¬ ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</strong></p>
          <p style="margin-top: 10px">
            ê°œë³„ ì»¨ì„¤íŒ… ì˜ˆì•½ì„ ìœ„í•´ì„œëŠ” ë¨¼ì € ì§„ë‹¨ê²€ì‚¬ë¥¼ ì‹ ì²­í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.
          </p>
        </div>

        <div class="info-box">
          <strong>ì§„ë‹¨ê²€ì‚¬ ì‹ ì²­ ì ˆì°¨</strong>
          <ol style="margin-left: 20px">
            <li>ì§„ë‹¨ê²€ì‚¬ ì‹ ì²­ í˜ì´ì§€ë¡œ ì´ë™</li>
            <li>ì‹œí—˜ì§€ ë‹¤ìš´ë¡œë“œ ë° ì‘ì‹œ</li>
            <li>ì»¨ì„¤íŒ… ì˜ˆì•½ ê°€ëŠ¥</li>
          </ol>
        </div>

        <button class="btn btn-link" onclick="goToTestGuide()">
          ì§„ë‹¨ê²€ì‚¬ ì‹ ì²­í•˜ëŸ¬ ê°€ê¸°
        </button>
        <button
          class="btn btn-secondary"
          onclick="showStep('mainScreen')"
          style="margin-top: 10px"
        >
          ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </button>
      </div>

      <!-- STEP 2: ë‚ ì§œ ì„ íƒ -->
      <div id="step2" class="card hidden">
        <h1>ìˆ˜í•™ì˜ ì•„ì¹¨ X i.study [ìˆ˜ë¦¬íƒêµ¬]</h1>
        <h3>ì»¨ì„¤íŒ… ë‚ ì§œ ì„ íƒ</h3>
        <p style="margin-bottom: 20px; color: #666">
          ì›í•˜ì‹œëŠ” ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.
        </p>

        <div class="date-selector" id="dateSelector">
          <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
        </div>

        <button
          class="btn btn-primary"
          onclick="proceedToTimeSelection()"
          disabled
          id="dateNextBtn"
        >
          ì‹œê°„ ì„ íƒí•˜ê¸°
        </button>
        <button
          class="btn btn-secondary"
          onclick="showStep('mainScreen')"
          style="margin-top: 10px"
        >
          ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </button>
      </div>

      <!-- STEP 3: ì‹œê°„ ì„ íƒ -->
      <div id="step3" class="card hidden">
        <h1>ìˆ˜í•™ì˜ ì•„ì¹¨ X i.study [ìˆ˜ë¦¬íƒêµ¬]</h1>
        <h3>ì»¨ì„¤íŒ… ì‹œê°„ ì„ íƒ</h3>
        <p style="margin-bottom: 20px; color: #666">
          <span id="selectedDateDisplay"></span>ì˜ ì˜ˆì•½ ê°€ëŠ¥í•œ ì‹œê°„ì…ë‹ˆë‹¤.
        </p>

        <div class="time-selector">
          <div class="time-grid" id="timeGrid">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
          </div>
        </div>

        <button class="btn btn-secondary" onclick="backToDateSelection()">
          ë‚ ì§œ ë‹¤ì‹œ ì„ íƒ
        </button>
        <button
          class="btn btn-primary"
          onclick="confirmReservation()"
          disabled
          id="confirmBtn"
        >
          ì˜ˆì•½ í™•ì •í•˜ê¸°
        </button>
      </div>

      <!-- STEP 4: ì˜ˆì•½ ì™„ë£Œ -->
      <div id="step4" class="card hidden">
        <h1>ìˆ˜í•™ì˜ ì•„ì¹¨ X i.study [ìˆ˜ë¦¬íƒêµ¬]</h1>
        <div class="success-icon">âœ…</div>
        <h3 style="text-align: center; margin-bottom: 20px">
          ì»¨ì„¤íŒ… ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!
        </h3>

        <div class="reservation-info">
          <div class="info-item">
            <span class="info-label">ì˜ˆì•½ë²ˆí˜¸:</span>
            <span class="info-value" id="confirmReservationId">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">í•™ìƒëª…:</span>
            <span class="info-value" id="confirmName">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">ì»¨ì„¤íŒ… ë‚ ì§œ:</span>
            <span class="info-value" id="confirmDate">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">ì»¨ì„¤íŒ… ì‹œê°„:</span>
            <span class="info-value" id="confirmTime">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">ì¥ì†Œ:</span>
            <span class="info-value">ìˆ˜í•™ì˜ ì•„ì¹¨ í•™ì›</span>
          </div>
        </div>

        <div class="warning-box">
          <h4 style="margin-bottom: 10px">ğŸ“Œ ì»¨ì„¤íŒ… ì¤€ë¹„ì‚¬í•­</h4>
          <ul style="margin-left: 20px">
            <li>ì‘ì„±í•œ ì§„ë‹¨ê²€ì‚¬ ì‹œí—˜ì§€ ì§€ì°¸</li>
            <li>ìµœê·¼ ì„±ì í‘œë‚˜ ë¬¸ì œì§‘ ì§€ì°¸(ì„ íƒ)</li>
          </ul>
        </div>

        <button class="btn btn-primary" onclick="showStep('mainScreen')">
          í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </button>
      </div>

      <!-- ì˜ˆì•½ í™•ì¸ -->
      <div id="checkReservation" class="card hidden">
        <h1>ìˆ˜í•™ì˜ ì•„ì¹¨ X i.study [ìˆ˜ë¦¬íƒêµ¬]</h1>
        <h3>ì˜ˆì•½ í™•ì¸/ì·¨ì†Œ</h3>
        <p style="margin-bottom: 20px; color: #666">
          ì˜ˆì•½ ì‹œ ë“±ë¡í•œ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
        </p>

        <div class="form-group">
          <label>í•™ë¶€ëª¨ ì—°ë½ì²˜</label>
          <input
            type="tel"
            id="checkPhoneInput"
            placeholder="010-0000-0000"
            maxlength="13"
            required
          />
        </div>

        <button class="btn btn-primary" onclick="checkReservation()">
          ì˜ˆì•½ ì¡°íšŒ
        </button>
        <button
          class="btn btn-secondary"
          onclick="showStep('mainScreen')"
          style="margin-top: 10px"
        >
          ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </button>
      </div>

      <!-- ì˜ˆì•½ ì¡°íšŒ ê²°ê³¼ -->
      <div id="reservationResult" class="card hidden">
        <h1>ìˆ˜í•™ì˜ ì•„ì¹¨ X i.study [ìˆ˜ë¦¬íƒêµ¬]</h1>
        <h3>ì˜ˆì•½ ì •ë³´</h3>

        <div class="reservation-info" id="reservationInfo">
          <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
        </div>

        <button class="btn btn-danger" onclick="cancelReservation()">
          ì˜ˆì•½ ì·¨ì†Œí•˜ê¸°
        </button>
        <button
          class="btn btn-secondary"
          onclick="showStep('checkReservation')"
          style="margin-top: 10px"
        >
          ë‹¤ì‹œ ì¡°íšŒ
        </button>
        <button
          class="btn btn-primary"
          onclick="showStep('mainScreen')"
          style="margin-top: 10px"
        >
          ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </button>
      </div>

      <!-- ë¡œë”© -->
      <div id="loading" class="card hidden">
        <div class="loading">
          <div class="spinner"></div>
          <p>ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤...</p>
        </div>
      </div>
    </div>

    <!-- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ -->
    <div class="toast" id="toast"></div>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
      // Supabase ì„¤ì •
      const SUPABASE_URL = 'https://xooglumwuzctbcjtcvnd.supabase.co';
      const SUPABASE_ANON_KEY =
        'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhvb2dsdW13dXpjdGJjanRjdm5kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1OTk5OTgsImV4cCI6MjA3MTE3NTk5OH0.Uza-Z3CzwQgkYKJmKdwTNCAYgaxeKFs__2udUSAGpJg';
      const supabase = window.supabase.createClient(
        SUPABASE_URL,
        SUPABASE_ANON_KEY
      );

      // ì „ì—­ ë³€ìˆ˜
      let currentUser = null;
      let selectedDate = null;
      let selectedTime = null;
      let selectedSlotId = null;
      let currentReservation = null;

      // ì „í™”ë²ˆí˜¸ í¬ë§· (ìë™ í•˜ì´í”ˆ)
      function formatPhoneInput(input) {
        let value = input.value.replace(/[^0-9]/g, '');

        if (value.length > 3 && value.length <= 7) {
          value = value.slice(0, 3) + '-' + value.slice(3);
        } else if (value.length > 7) {
          value =
            value.slice(0, 3) +
            '-' +
            value.slice(3, 7) +
            '-' +
            value.slice(7, 11);
        }

        input.value = value;
      }

      // ì „í™”ë²ˆí˜¸ ì…ë ¥ ì´ë²¤íŠ¸
      document
        .getElementById('phoneInput')
        .addEventListener('input', function () {
          formatPhoneInput(this);
        });

      document
        .getElementById('checkPhoneInput')
        .addEventListener('input', function () {
          formatPhoneInput(this);
        });

      // ì „í™”ë²ˆí˜¸ í¬ë§· (DBìš©)
      function formatPhone(phone) {
        const cleaned = phone.replace(/\D/g, '');
        if (cleaned.length === 11) {
          return `${cleaned.slice(0, 3)}-${cleaned.slice(3, 7)}-${cleaned.slice(
            7
          )}`;
        }
        return phone;
      }

      // ì˜¤ëŠ˜ ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°
      function getTodayString() {
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
      }

      // ë‚´ì¼ ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°
      function getTomorrowString() {
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        const year = tomorrow.getFullYear();
        const month = String(tomorrow.getMonth() + 1).padStart(2, '0');
        const day = String(tomorrow.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
      }

      // ë‚ ì§œ ë¹„êµ
      function compareDates(date1, date2) {
        return new Date(date1) - new Date(date2);
      }

      // í™”ë©´ ì „í™˜
      function showStep(stepId) {
        document.querySelectorAll('.card').forEach((card) => {
          card.classList.add('hidden');
        });
        document.getElementById(stepId).classList.remove('hidden');

        // ë©”ì¸ í™”ë©´ìœ¼ë¡œ ëŒì•„ì˜¬ ë•Œ ì…ë ¥ê°’ ì´ˆê¸°í™”
        if (stepId === 'mainScreen') {
          document.getElementById('phoneInput').value = '';
          currentUser = null;
          selectedDate = null;
          selectedTime = null;
          selectedSlotId = null;
        }
      }

      // í† ìŠ¤íŠ¸ ë©”ì‹œì§€
      function showToast(message, type = 'info') {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.className = 'toast';

        if (type === 'error') {
          toast.classList.add('error');
        } else if (type === 'success') {
          toast.classList.add('success');
        } else if (type === 'warning') {
          toast.classList.add('warning');
        }

        toast.classList.add('show');

        setTimeout(() => {
          toast.classList.remove('show');
        }, 3000);
      }

      // ë¡œë”© í‘œì‹œ
      function showLoading() {
        document.getElementById('loading').classList.remove('hidden');
      }

      function hideLoading() {
        document.getElementById('loading').classList.add('hidden');
      }

      // ì§„ë‹¨ê²€ì‚¬ í˜ì´ì§€ë¡œ ì´ë™
      function goToTestGuide() {
        window.location.href = 'test-guide.html';
      }

      // ë³¸ì¸ í™•ì¸
      async function verifyUser() {
        const phone = document.getElementById('phoneInput').value;
        const formattedPhone = formatPhone(phone);

        if (!formattedPhone || formattedPhone.length < 13) {
          showToast('ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
          return;
        }

        showLoading();

        try {
          // 1. ì§„ë‹¨ê²€ì‚¬ ì™„ë£Œì í™•ì¸
          const { data: testUser, error: testError } = await supabase
            .from('reservations')
            .select('*')
            .eq('parent_phone', formattedPhone)
            .eq('post_checkin_choice', 'test')
            .order('id', { ascending: false })
            .limit(1);

          if (!testUser || testUser.length === 0) {
            hideLoading();
            // ì§„ë‹¨ê²€ì‚¬ ì‹ ì²­ ì•ˆë‚´ í™”ë©´ìœ¼ë¡œ ì´ë™
            showStep('testGuideRedirect');
            return;
          }

          // 2. ê¸°ì¡´ ì»¨ì„¤íŒ… ì˜ˆì•½ í™•ì¸ (ì¤‘ë³µ ë°©ì§€)
          const { data: existingReservations, error: existError } =
            await supabase
              .from('consulting_reservations')
              .select('*')
              .eq('parent_phone', formattedPhone)
              .eq('status', 'confirmed');

          if (existingReservations && existingReservations.length > 0) {
            const existingReservation = existingReservations[0];
            // ìŠ¬ë¡¯ ì •ë³´ ë³„ë„ ì¡°íšŒ
            const { data: slot, error: slotError } = await supabase
              .from('consulting_slots')
              .select('*')
              .eq('id', existingReservation.slot_id)
              .single();

            hideLoading();

            if (slot) {
              const dateObj = new Date(slot.date);
              const dateStr = `${
                dateObj.getMonth() + 1
              }ì›” ${dateObj.getDate()}ì¼`;

              showToast(
                `ì´ë¯¸ ${dateStr} ${slot.time.slice(
                  0,
                  5
                )}ì— ì˜ˆì•½ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆì•½ í™•ì¸ ë©”ë‰´ë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”.`,
                'warning'
              );

              // ì˜ˆì•½ í™•ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™í• ì§€ ë¬»ê¸°
              if (confirm('ê¸°ì¡´ ì˜ˆì•½ì„ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                document.getElementById('checkPhoneInput').value =
                  formattedPhone;
                showStep('checkReservation');
              }
            }
            return;
          }

          currentUser = testUser[0];
          hideLoading();
          showDateSelection();
        } catch (error) {
          console.error('Error:', error);
          hideLoading();
          showToast('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
        }
      }

      // ê¸°ì¡´ ì˜ˆì•½ í™•ì¸ (ë©”ì¸ í™”ë©´ì—ì„œ)
      function checkExistingReservation() {
        showStep('checkReservation');
      }

      // ë‚ ì§œ ì„ íƒ í™”ë©´
      async function showDateSelection() {
        showStep('step2');
        await loadAvailableDates();
      }

      // ì˜ˆì•½ ê°€ëŠ¥í•œ ë‚ ì§œ ë¡œë“œ
      async function loadAvailableDates() {
        const dateSelector = document.getElementById('dateSelector');
        dateSelector.innerHTML =
          '<div class="loading">ë‚ ì§œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';

        const tomorrow = getTomorrowString();
        const baseDate = new Date('2025-09-09');
        let currentWeek = 0;
        let dateFound = false;

        dateSelector.innerHTML = '';

        // ìµœëŒ€ 4ì£¼ê¹Œì§€ í™•ì¸í•˜ë˜, ë‚ ì§œ í•˜ë‚˜ë§Œ ì°¾ìœ¼ë©´ ì¤‘ë‹¨
        while (currentWeek < 4 && !dateFound) {
          const weekContainer = document.createElement('div');
          weekContainer.className = 'week-container';

          const dateGrid = document.createElement('div');
          dateGrid.className = 'date-grid';

          // í™”ìš”ì¼
          const tuesday = new Date(baseDate);
          tuesday.setDate(tuesday.getDate() + currentWeek * 7);

          // ëª©ìš”ì¼
          const thursday = new Date(tuesday);
          thursday.setDate(thursday.getDate() + 2);

          // ì‹¤ì œ ì”ì—¬ì„ í™•ì¸
          const tuesdaySlots = await checkAvailability(tuesday);
          const thursdaySlots = await checkAvailability(thursday);

          // ë‚ ì§œ ì¹´ë“œ ìƒì„±
          const tuesdayCard = createDateCard(
            tuesday,
            'TUE',
            tuesdaySlots,
            tomorrow
          );
          const thursdayCard = createDateCard(
            thursday,
            'THU',
            thursdaySlots,
            tomorrow
          );

          // í™”ìš”ì¼ì— ì”ì—¬ì„ì´ ìˆìœ¼ë©´ í™”ìš”ì¼ë§Œ í‘œì‹œ
          if (tuesdaySlots !== null && tuesdaySlots > 0) {
            dateGrid.appendChild(tuesdayCard);
            dateFound = true;
          }
          // í™”ìš”ì¼ì´ ë§ˆê°ì´ê³  ëª©ìš”ì¼ì— ì”ì—¬ì„ì´ ìˆìœ¼ë©´ ëª©ìš”ì¼ë§Œ í‘œì‹œ
          else if (
            tuesdaySlots === 0 &&
            thursdaySlots !== null &&
            thursdaySlots > 0
          ) {
            dateGrid.appendChild(thursdayCard);
            dateFound = true;
          }
          // ë‘˜ ë‹¤ ë§ˆê°ì´ë©´ ë‹¤ìŒ ì£¼ë¡œ
          else if (tuesdaySlots === 0 && thursdaySlots === 0) {
            currentWeek++;
            continue;
          }

          if (dateGrid.children.length > 0) {
            weekContainer.appendChild(dateGrid);
            dateSelector.appendChild(weekContainer);
          }
        }

        if (dateSelector.children.length === 0) {
          dateSelector.innerHTML =
            '<div class="error-box">í˜„ì¬ ì˜ˆì•½ ê°€ëŠ¥í•œ ë‚ ì§œê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
        }
      }

      // ì”ì—¬ì„ í™•ì¸
      async function checkAvailability(date) {
        try {
          const dateStr = date.toISOString().split('T')[0];
          const tomorrow = getTomorrowString();

          // ë‚´ì¼ë³´ë‹¤ ì´ì „ ë‚ ì§œëŠ” ì˜ˆì•½ ë¶ˆê°€
          if (compareDates(dateStr, tomorrow) < 0) {
            return null;
          }

          // ë°©ë²•: í•´ë‹¹ ë‚ ì§œì˜ ìŠ¬ë¡¯ê³¼ ì˜ˆì•½ì„ ë³„ë„ë¡œ ì¡°íšŒ
          const { data: slots, error: slotsError } = await supabase
            .from('consulting_slots')
            .select('id')
            .eq('date', dateStr);

          if (slotsError) {
            console.error('Slots error in checkAvailability:', slotsError);
            return 9; // ì—ëŸ¬ì‹œ ê¸°ë³¸ê°’
          }

          let bookedCount = 0;

          if (slots && slots.length > 0) {
            const slotIds = slots.map((s) => s.id);
            const { data: reservations, error: resError } = await supabase
              .from('consulting_reservations')
              .select('id')
              .in('slot_id', slotIds)
              .eq('status', 'confirmed');

            if (!resError && reservations) {
              bookedCount = reservations.length;
            }
          }

          // ì´ 9ê°œ ìŠ¬ë¡¯ (10:30 ~ 14:30)
          const totalSlots = 9;
          const availableSlots = totalSlots - bookedCount;

          return availableSlots;
        } catch (error) {
          console.error('Error checking availability:', error);
          return 9; // ì—ëŸ¬ì‹œ ê¸°ë³¸ê°’
        }
      }

      // ë‚ ì§œ ì¹´ë“œ ìƒì„±
      function createDateCard(date, dayOfWeek, availableSlots, tomorrow) {
        const card = document.createElement('div');
        card.className = 'date-card';

        const dateStr = date.toISOString().split('T')[0];
        const month = date.getMonth() + 1;
        const day = date.getDate();
        const dayName = dayOfWeek === 'TUE' ? 'í™”ìš”ì¼' : 'ëª©ìš”ì¼';

        const isPast = compareDates(dateStr, tomorrow) < 0;
        const isFull = availableSlots === 0;

        if (isPast) {
          card.classList.add('past');
        } else if (isFull) {
          card.classList.add('full');
        }

        let statusClass = 'remaining-seats';
        let statusText = `ì”ì—¬ ${availableSlots}ì„`;

        if (isPast) {
          statusClass += ' full';
          statusText = 'ì˜ˆì•½ ë¶ˆê°€';
        } else if (isFull) {
          statusClass += ' full';
          statusText = 'ë§ˆê°';
        } else if (availableSlots <= 3) {
          statusClass += ' few';
        }

        card.innerHTML = `
          <div class="date-header">
            <span class="date-month">${month}ì›”</span>
            <span class="date-day">${day}</span>
            <span class="date-weekday">${dayName}</span>
          </div>
          <div class="date-info">
            <div class="${statusClass}">
              ${statusText}
            </div>
          </div>
        `;

        if (!isPast && !isFull) {
          card.onclick = () => selectDate(dateStr, dayOfWeek, card);
        }

        return card;
      }

      // ë‚ ì§œ ì„ íƒ
      function selectDate(date, dayOfWeek, element) {
        document.querySelectorAll('.date-card').forEach((card) => {
          card.classList.remove('selected');
        });

        element.classList.add('selected');
        selectedDate = { date, dayOfWeek };

        document.getElementById('dateNextBtn').disabled = false;
      }

      // ì‹œê°„ ì„ íƒìœ¼ë¡œ ì§„í–‰
      async function proceedToTimeSelection() {
        if (!selectedDate) return;

        showStep('step3');

        // ì„ íƒí•œ ë‚ ì§œ í‘œì‹œ
        const dateObj = new Date(selectedDate.date);
        const dateStr = `${dateObj.getMonth() + 1}ì›” ${dateObj.getDate()}ì¼ ${
          selectedDate.dayOfWeek === 'TUE' ? 'í™”ìš”ì¼' : 'ëª©ìš”ì¼'
        }`;
        document.getElementById('selectedDateDisplay').textContent = dateStr;

        await loadTimeSlots();
      }

      // ì‹œê°„ ìŠ¬ë¡¯ ë¡œë“œ
      async function loadTimeSlots() {
        const timeGrid = document.getElementById('timeGrid');
        timeGrid.innerHTML = '<div class="loading">ì‹œê°„ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';

        const times = [
          '10:30',
          '11:00',
          '11:30',
          '12:00',
          '12:30',
          '13:00',
          '13:30',
          '14:00',
          '14:30',
        ];

        try {
          // ë°©ë²• 1: JOINì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë³„ë„ë¡œ ì¡°íšŒ
          // ë¨¼ì € í•´ë‹¹ ë‚ ì§œì˜ ìŠ¬ë¡¯ë“¤ì„ ì¡°íšŒ
          const { data: slots, error: slotsError } = await supabase
            .from('consulting_slots')
            .select('*')
            .eq('date', selectedDate.date);

          if (slotsError) {
            console.error('Slots query error:', slotsError);
            throw slotsError;
          }

          // ì˜ˆì•½ëœ ìŠ¬ë¡¯ IDë“¤ ê°€ì ¸ì˜¤ê¸°
          const slotIds = slots ? slots.map((s) => s.id) : [];
          let bookedSlotIds = [];

          if (slotIds.length > 0) {
            const { data: reservations, error: resError } = await supabase
              .from('consulting_reservations')
              .select('slot_id')
              .in('slot_id', slotIds)
              .eq('status', 'confirmed');

            if (resError) {
              console.error('Reservations query error:', resError);
              throw resError;
            }

            bookedSlotIds = reservations
              ? reservations.map((r) => r.slot_id)
              : [];
          }

          // ì˜ˆì•½ëœ ì‹œê°„ ì°¾ê¸°
          const bookedTimes = slots
            ? slots
                .filter((s) => bookedSlotIds.includes(s.id))
                .map((s) => s.time.slice(0, 5))
            : [];

          console.log('Booked times:', bookedTimes);

          timeGrid.innerHTML = '';

          times.forEach((time) => {
            const slot = document.createElement('div');
            slot.className = 'time-slot';

            const isBooked = bookedTimes.includes(time);

            if (isBooked) {
              slot.classList.add('unavailable');
            }

            slot.innerHTML = `
              <div class="time-text">${time}</div>
              <div class="time-status">${
                !isBooked ? 'ì˜ˆì•½ ê°€ëŠ¥' : 'ì˜ˆì•½ ì™„ë£Œ'
              }</div>
            `;

            if (!isBooked) {
              slot.onclick = () => selectTime(time, slot);
            }

            timeGrid.appendChild(slot);
          });
        } catch (error) {
          console.error('Error loading time slots:', error);
          // ì—ëŸ¬ ë°œìƒì‹œ ëª¨ë“  ì‹œê°„ì„ ì˜ˆì•½ ê°€ëŠ¥ìœ¼ë¡œ í‘œì‹œ (í´ë°±)
          timeGrid.innerHTML = '';

          times.forEach((time) => {
            const slot = document.createElement('div');
            slot.className = 'time-slot';

            slot.innerHTML = `
              <div class="time-text">${time}</div>
              <div class="time-status">ì˜ˆì•½ ê°€ëŠ¥</div>
            `;

            slot.onclick = () => selectTime(time, slot);

            timeGrid.appendChild(slot);
          });
        }
      }

      // ì‹œê°„ ì„ íƒ
      function selectTime(time, element) {
        document.querySelectorAll('.time-slot').forEach((slot) => {
          slot.classList.remove('selected');
        });

        element.classList.add('selected');
        selectedTime = time;

        document.getElementById('confirmBtn').disabled = false;
      }

      // ë‚ ì§œ ì„ íƒìœ¼ë¡œ ëŒì•„ê°€ê¸°
      function backToDateSelection() {
        showStep('step2');
        selectedTime = null;
        document.getElementById('confirmBtn').disabled = true;
      }

      // ì˜ˆì•½ í™•ì •
      async function confirmReservation() {
        if (!selectedDate || !selectedTime || !currentUser) return;

        const tomorrow = getTomorrowString();
        if (compareDates(selectedDate.date, tomorrow) < 0) {
          showToast('ì˜ˆì•½ì€ ë‚´ì¼ë¶€í„° ê°€ëŠ¥í•©ë‹ˆë‹¤.', 'error');
          return;
        }

        showLoading();

        try {
          // ìŠ¬ë¡¯ ìƒì„± ë˜ëŠ” ì¡°íšŒ
          let slotId;

          // ë¨¼ì € í•´ë‹¹ ë‚ ì§œ/ì‹œê°„ì˜ ìŠ¬ë¡¯ì´ ìˆëŠ”ì§€ í™•ì¸
          const { data: existingSlot, error: slotCheckError } = await supabase
            .from('consulting_slots')
            .select('*')
            .eq('date', selectedDate.date)
            .eq('time', selectedTime + ':00')
            .single();

          if (existingSlot) {
            slotId = existingSlot.id;

            // ì´ë¯¸ ì˜ˆì•½ì´ ìˆëŠ”ì§€ ì¬í™•ì¸
            const { data: existingReservation } = await supabase
              .from('consulting_reservations')
              .select('*')
              .eq('slot_id', slotId)
              .eq('status', 'confirmed')
              .single();

            if (existingReservation) {
              hideLoading();
              showToast(
                'í•´ë‹¹ ì‹œê°„ì€ ì´ë¯¸ ì˜ˆì•½ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.',
                'error'
              );
              await loadTimeSlots();
              return;
            }
          } else {
            // ìŠ¬ë¡¯ ìƒì„±
            const { data: newSlot, error: slotError } = await supabase
              .from('consulting_slots')
              .insert([
                {
                  date: selectedDate.date,
                  time: selectedTime + ':00',
                  day_of_week: selectedDate.dayOfWeek,
                  max_capacity: 1,
                  current_bookings: 0,
                  is_available: true,
                },
              ])
              .select()
              .single();

            if (slotError) throw slotError;
            slotId = newSlot.id;
          }

          // ì˜ˆì•½ ì €ì¥ (ì´ ë¶€ë¶„ì´ ë¹ ì§)
          const { data: reservation, error: resError } = await supabase
            .from('consulting_reservations')
            .insert([
              {
                slot_id: slotId,
                student_name: currentUser.student_name,
                parent_phone: currentUser.parent_phone,
                school: currentUser.school || 'UNKNOWN',
                grade: currentUser.grade || 'UNKNOWN',
                test_type: currentUser.test_type || 'UNKNOWN',
                test_completed: true,
                status: 'confirmed',
                notes: `${selectedDate.date} ${selectedTime} ì»¨ì„¤íŒ… ì˜ˆì•½`,
              },
            ])
            .select()
            .single();

          if (resError) throw resError;

          hideLoading();
          showConfirmation(reservation);
        } catch (error) {
          console.error('Error:', error);
          hideLoading();
          showToast('ì˜ˆì•½ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
        }
      }

      // ì˜ˆì•½ ì™„ë£Œ í™”ë©´
      function showConfirmation(reservation) {
        showStep('step4');

        // UUIDì˜ ì• 8ìë¦¬ë¥¼ ì˜ˆì•½ë²ˆí˜¸ë¡œ ì‚¬ìš©
        const shortId = reservation.id
          ? reservation.id.slice(0, 8).toUpperCase()
          : '-';
        document.getElementById('confirmReservationId').textContent = shortId;
        document.getElementById('confirmName').textContent =
          reservation.student_name;

        const dateObj = new Date(selectedDate.date);
        const dateStr = `${dateObj.getMonth() + 1}ì›” ${dateObj.getDate()}ì¼ ${
          selectedDate.dayOfWeek === 'TUE' ? 'í™”ìš”ì¼' : 'ëª©ìš”ì¼'
        }`;
        document.getElementById('confirmDate').textContent = dateStr;
        document.getElementById('confirmTime').textContent = selectedTime;

        // ì´ˆê¸°í™”
        currentUser = null;
        selectedDate = null;
        selectedTime = null;
        selectedSlotId = null;
      }

      // ì˜ˆì•½ í™•ì¸
      async function checkReservation() {
        const phone = document.getElementById('checkPhoneInput').value;
        const formattedPhone = formatPhone(phone);

        if (!formattedPhone || formattedPhone.length < 13) {
          showToast('ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
          return;
        }

        showLoading();

        try {
          // ë¨¼ì € ì˜ˆì•½ ì •ë³´ ì¡°íšŒ
          const { data: reservation, error: resError } = await supabase
            .from('consulting_reservations')
            .select('*')
            .eq('parent_phone', formattedPhone)
            .eq('status', 'confirmed')
            .single();

          if (resError || !reservation) {
            hideLoading();
            showToast('ì˜ˆì•½ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
            return;
          }

          // ìŠ¬ë¡¯ ì •ë³´ ë³„ë„ ì¡°íšŒ
          const { data: slot, error: slotError } = await supabase
            .from('consulting_slots')
            .select('*')
            .eq('id', reservation.slot_id)
            .single();

          if (slotError || !slot) {
            hideLoading();
            showToast('ì˜ˆì•½ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            return;
          }

          // ì˜ˆì•½ ì •ë³´ì— ìŠ¬ë¡¯ ì •ë³´ ì¶”ê°€
          reservation.consulting_slots = slot;

          hideLoading();
          currentReservation = reservation;
          showReservationResult(reservation);
        } catch (error) {
          console.error('Error:', error);
          hideLoading();
          showToast('ì˜ˆì•½ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
        }
      }

      // ì˜ˆì•½ ê²°ê³¼ í‘œì‹œ
      function showReservationResult(reservation) {
        const slot = reservation.consulting_slots;
        const dateObj = new Date(slot.date);
        const dateStr = `${dateObj.getMonth() + 1}ì›” ${dateObj.getDate()}ì¼`;
        const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
        const dayName = dayNames[dateObj.getDay()];

        // UUIDì˜ ì• 8ìë¦¬ë¥¼ ì˜ˆì•½ë²ˆí˜¸ë¡œ ì‚¬ìš©
        const shortId = reservation.id
          ? reservation.id.slice(0, 8).toUpperCase()
          : '-';

        const infoHtml = `
          <div class="info-item">
            <span class="info-label">ì˜ˆì•½ë²ˆí˜¸:</span>
            <span class="info-value">${shortId}</span>
          </div>
          <div class="info-item">
            <span class="info-label">í•™ìƒëª…:</span>
            <span class="info-value">${reservation.student_name}</span>
          </div>
          <div class="info-item">
            <span class="info-label">ì»¨ì„¤íŒ… ë‚ ì§œ:</span>
            <span class="info-value">${dateStr} (${dayName})</span>
          </div>
          <div class="info-item">
            <span class="info-label">ì»¨ì„¤íŒ… ì‹œê°„:</span>
            <span class="info-value">${slot.time.slice(0, 5)}</span>
          </div>
          <div class="info-item">
            <span class="info-label">ì—°ë½ì²˜:</span>
            <span class="info-value">${reservation.parent_phone}</span>
          </div>
          <div class="info-item">
            <span class="info-label">í•™êµ:</span>
            <span class="info-value">${reservation.school}</span>
          </div>
          <div class="info-item">
            <span class="info-label">í•™ë…„:</span>
            <span class="info-value">${reservation.grade}</span>
          </div>
        `;

        document.getElementById('reservationInfo').innerHTML = infoHtml;
        showStep('reservationResult');
      }

      // ì˜ˆì•½ ì·¨ì†Œ
      async function cancelReservation() {
        if (!currentReservation) return;

        if (
          !confirm(
            'ì •ë§ë¡œ ì˜ˆì•½ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì·¨ì†Œ í›„ì—ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
          )
        ) {
          return;
        }

        showLoading();

        try {
          // ì˜ˆì•½ ìƒíƒœë¥¼ cancelledë¡œ ë³€ê²½
          const { error } = await supabase
            .from('consulting_reservations')
            .update({ status: 'cancelled' })
            .eq('id', currentReservation.id);

          if (error) throw error;

          hideLoading();
          showToast('ì˜ˆì•½ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');

          // ì´ˆê¸°í™”
          currentReservation = null;
          document.getElementById('checkPhoneInput').value = '';
          showStep('mainScreen');
        } catch (error) {
          console.error('Error:', error);
          hideLoading();
          showToast('ì˜ˆì•½ ì·¨ì†Œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
        }
      }

      // í˜ì´ì§€ ë¡œë“œì‹œ ì´ˆê¸°í™”
      document.addEventListener('DOMContentLoaded', function () {
        showStep('mainScreen');
      });
    </script>
  </body>
</html>
